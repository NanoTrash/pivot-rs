# pivot-rs


`pivot-rs` ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ—Ä—Ç‚Äë—Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥–∞ –∏ Socks‚Äë–ø—Ä–æ–∫—Å–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Rust ü¶Ä

## –°–±–æ—Ä–∫–∞

–ü—Ä–æ–µ–∫—Ç –ø—É–±–ª–∏–∫—É–µ—Ç –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä (GitHub Actions):

- x86_64-unknown-linux-gnu
- x86_64-apple-darwin
- aarch64-apple-darwin
- x86_64-pc-windows-msvc

*–î–ª—è `x86_64-unknown-linux-gnu` –∏ `x86_64-pc-windows-msvc` –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω –±–∏–Ω–∞—Ä–Ω–∏–∫, —Å–∂–∞—Ç—ã–π UPX.*

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É:

```bash
git clone https://github.com/NanoTrash/pivot-rs
cd pivot-rs
cargo build --release
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- TCP/UDP –ø–æ—Ä—Ç‚Äë—Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥
- –ü–µ—Ä–µ—Å—ã–ª–∫–∞ Unix domain socket (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/var/run/docker.sock`)
- Socks5‚Äë–ø—Ä–æ–∫—Å–∏ (–±–µ–∑/—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π)
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TCP‚Äë–ø–æ—Ä—Ç–∞ (`SO_REUSEADDR`, `SO_REUSEPORT`)
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ü–µ–ø–æ—á–∫–∏ –ø—Ä–æ–∫—Å–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TLS‚Äë—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

## –û–±—â–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

- `fwd` —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä—è–º–æ–π/–æ–±—Ä–∞—Ç–Ω—ã–π TCP/UDP —Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥ –∏ –ø—Ä–æ–∫–ª–∞–¥–∫—É –º–µ–∂–¥—É –¥–≤—É–º—è –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏; –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç TLS —á–µ—Ä–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å `+` —É –∞–¥—Ä–µ—Å–∞/–ø–æ—Ä—Ç–∞.
- `proxy` –ø–æ–¥–Ω–∏–º–∞–µ—Ç Socks5‚Äë—Å–µ—Ä–≤–µ—Ä, –∞ —Ç–∞–∫–∂–µ ¬´—Ä–µ–≤–µ—Ä—Å‚Äë–ø—Ä–æ–∫—Å–∏¬ª —á–µ—Ä–µ–∑ TCP‚Äë–º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ (control –ø–æ—Ä—Ç + proxy –ø–æ—Ä—Ç). –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è `user:pass` –∏–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
- `reuse` —Å–æ–∑–¥–∞—ë—Ç —Å–æ–∫–µ—Ç —Å `SO_REUSE*`, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ –∑–∞–Ω—è—Ç–æ–º –ø–æ—Ä—Ç—É –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–π –∏—Ö –ø–æ –ø—Ä–∞–≤–∏–ª—É: –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `external` ‚Üí –≤ `remote`, –∏–Ω–∞—á–µ ‚Üí `fallback`.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
$ ./pivot -h

Pivot: Port-Forwarding and Proxy Tool

Usage: pivot <COMMAND>

Commands:
  fwd    Port forwarding mode
  proxy  Socks proxy mode
  reuse  Port reuse mode
  help   Print this message or the help of the given subcommand(s)

Options:
  -h, --help     Print help
  -V, --version  Print version
```

–†–µ–∂–∏–º –ø–æ—Ä—Ç‚Äë—Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥–∞

```bash
$ ./pivot fwd -h

Usage: pivot fwd [OPTIONS]

Options:
  -l, --locals <LOCALS>            [+][IP:]PORT (–ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–ª—É—à–∞—é—â–∏–µ –∞–¥—Ä–µ—Å–∞)
  -r, --remotes <REMOTES>          [+]IP:PORT (—É–¥–∞–ª—ë–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞)
  -s, --socket <SOCKET>            –ø—É—Ç—å Unix socket (Unix‚Äë—Å–∏—Å—Ç–µ–º—ã)
  -p, --protocol <PROTOCOL>        tcp|udp (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é tcp)
  -c, --connections <CONNECTIONS>  –º–∞–∫—Å–∏–º—É–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 32)
```

–†–µ–∂–∏–º Socks‚Äë–ø—Ä–æ–∫—Å–∏

```bash
$ ./pivot proxy -h

Options:
  -l, --locals <LOCALS>            [+][IP:]PORT
  -r, --remote <REMOTE>            [+]IP:PORT (reverse control –∞–¥—Ä–µ—Å)
  -a, --auth <AUTH>                user:pass (–∏–Ω–∞—á–µ ‚Äî —Å–ª—É—á–∞–π–Ω—ã–µ)
  -c, --connections <CONNECTIONS>  –º–∞–∫—Å–∏–º—É–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 32)
```

–†–µ–∂–∏–º –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–∞

```bash
$ ./pivot reuse -h

Usage: pivot reuse [OPTIONS] --local <LOCAL> --remote <REMOTE> --external <EXTERNAL>

Options:
  -l, --local <LOCAL>        IP:PORT (–∞–¥—Ä–µ—Å –¥–ª—è —Ä–µ—é–∑–∞)
  -r, --remote <REMOTE>      IP:PORT (–∫—É–¥–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å ¬´—Å–≤–æ–∏—Ö¬ª)
  -f, --fallback <FALLBACK>  IP:PORT (–∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å ¬´—á—É–∂–∏—Ö¬ª)
  -e, --external <EXTERNAL>  IP (–≤–Ω–µ—à–Ω–∏–π –∞–¥—Ä–µ—Å –∞—Ç–∞–∫—É—é—â–µ–≥–æ)
  -t, --timeout <TIMEOUT>    –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏—ë–º —á–µ—Ä–µ–∑ N —Å–µ–∫—É–Ω–¥
```

### TCP –ø–æ—Ä—Ç‚Äë—Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥

```bash
./pivot fwd -l 8888 -l 9999
./pivot fwd -l 8888 -r 10.0.0.1:9999
./pivot fwd -r 10.0.0.1:8888 -r 10.0.0.1:9999
```

`-c` –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —á–∏—Å–ª–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö TCP‚Äë—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

–ú–Ω–æ–≥–æ—Ö–æ–ø–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å): –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ –≤–∞–∂–µ–Ω ‚Äî —É–∑–µ–ª B —Å—Ç–∞—Ä—Ç—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–º.

```bash
# A
./pivot fwd -r 10.0.0.10:3389 -l 7777
# B
./pivot fwd -r 172.16.0.1:7777 -r 192.168.1.2:8888
# C
./pivot fwd -l 8888 -r vps:9999
# Attacker
./pivot fwd -l 9999 -l 33890
```

### UDP –ø–æ—Ä—Ç‚Äë—Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥

–î–æ–±–∞–≤—å—Ç–µ `-p udp`. –í —Ä–µ–∂–∏–º–µ reverse –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è 4‚Äë–±–∞–π—Ç–Ω—ã–π handshake –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∞–¥—Ä–µ—Å–∞. –ü–æ—Ä—è–¥–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.

```bash
# attacker
./pivot fwd -l 8888 -l 9999 -p udp
# victim
./pivot fwd -r 10.0.0.1:53 -r vps:8888 -p udp
```

### –ü–µ—Ä–µ—Å—ã–ª–∫–∞ Unix domain socket

Linux/macOS. –ü—Ä–∏–º–µ—Ä —Å `/var/run/docker.sock`:

```bash
./pivot fwd -s /var/run/docker.sock -l 4444
curl http://127.0.0.1:4444/version
```

### Socks‚Äë–ø—Ä–æ–∫—Å–∏

–ü—Ä—è–º–æ–π —Å–µ—Ä–≤–µ—Ä:

```bash
./pivot proxy -l 1080
```

–†–µ–≤–µ—Ä—Å‚Äë–ø—Ä–æ–∫—Å–∏ (–º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ): –ø–µ—Ä–≤—ã–π `-l` ‚Äî control –ø–æ—Ä—Ç, –≤—Ç–æ—Ä–æ–π ‚Äî proxy –ø–æ—Ä—Ç; –ø–æ—Ä—è–¥–æ–∫ –º–µ–Ω—è—Ç—å –Ω–µ–ª—å–∑—è.

```bash
./pivot proxy -l 7777 -l 8888
./pivot proxy -r vps:7777
```

–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:

```bash
./pivot proxy -l 1080 -a user:pass
./pivot proxy -l 1080 -a rand  # —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∏ –≤—ã–≤–µ–¥–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª—å
```

–ü—Ä–æ–±—Ä–æ—Å –Ω–µ–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö Socks‚Äë–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —É–¥–∞–ª—ë–Ω–Ω–æ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –ø—Ä–æ–∫—Å–∏:

```bash
./pivot proxy -l 1080 -r vps:1080 -a user:pass
```

### TLS‚Äë—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

–í–∫–ª—é—á–µ–Ω–∏–µ ‚Äî –ø—Ä–µ—Ñ–∏–∫—Å `+` —É –∞–¥—Ä–µ—Å–∞/–ø–æ—Ä—Ç–∞. –°–µ—Ä–≤–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –∫–ª–∏–µ–Ω—Ç –¥–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ–º (–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏).

```bash
./pivot fwd -l +7777 -l 33890
./pivot fwd -r 127.0.0.1:3389 -r +vps:7777
```

### –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TCP‚Äë–ø–æ—Ä—Ç–∞

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –û–°. Windows: —Ç–æ–ª—å–∫–æ `SO_REUSEADDR`. Linux/macOS: `SO_REUSEADDR` –∏ `SO_REUSEPORT` (–Ω–∞ Linux `0.0.0.0` –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ IP; –Ω–∞ macOS ‚Äî –Ω–µ—Ç).

–ü—Ä–∏–º–µ—Ä:

```bash
./pivot reuse -l 192.168.1.1:8000 -r 10.0.0.1:22 -f 127.0.0.1:8000 -e 1.2.3.4
```

`-t N` –æ—Ç–∫–ª—é—á–∞–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª—å —á–µ—Ä–µ–∑ N —Å–µ–∫—É–Ω–¥, –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–æ–∂–∏–≤–∞—é—Ç.

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

### –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ—Ä—Ç‚Äë—Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥ (Forwarding)

–≠—Ç–æ –∫–∞–∫ ¬´—Ç—Ä—É–±–∫–∞¬ª, —Å–æ–µ–¥–∏–Ω—è—é—â–∞—è –¥–≤–∞ –∞–¥—Ä–µ—Å–∞. –í—Å—ë, —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –æ–¥–∏–Ω –∫–æ–Ω–µ—Ü, —É—Ö–æ–¥–∏—Ç –Ω–∞ –¥—Ä—É–≥–æ–π.

- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ: –¥–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å—É —Å –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∏–ª–∏ –º–µ–∂–¥—É —Å–µ—Ç—è–º–∏.
- –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å:
  1) –°–æ–µ–¥–∏–Ω–∏—Ç—å –¥–≤–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–æ—Ä—Ç–∞ –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ: `./pivot fwd -l 8888 -l 9999`
  2) –ü—Ä–∏–Ω—è—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π: `./pivot fwd -l 8888 -r 10.0.0.1:9999`
  3) –°–æ–µ–¥–∏–Ω–∏—Ç—å –¥–≤–∞ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–∞ –º–µ–∂–¥—É —Å–æ–±–æ–π: `./pivot fwd -r 10.0.0.1:8888 -r 10.0.0.1:9999`
- UDP –≤–º–µ—Å—Ç–æ TCP: –¥–æ–±–∞–≤—å—Ç–µ `-p udp`. –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ UDP (–Ω–∞–ø—Ä–∏–º–µ—Ä DNS). –í ¬´reverse¬ª —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä–æ—Ç–∫–∏–π —Å–∏–≥–Ω–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç, –ø–æ—ç—Ç–æ–º—É –ø–æ—Ä—è–¥–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–∞–∂–µ–Ω.

### –ß—Ç–æ —Ç–∞–∫–æ–µ Socks‚Äë–ø—Ä–æ–∫—Å–∏ (Proxy)

–≠—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π ¬´–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫¬ª –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ–∫—Å–∏ –∏ —Ö–æ–¥–∏—Ç –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —á–µ—Ä–µ–∑ –Ω–µ–≥–æ.

- –ü—Ä—è–º–æ–π –ø—Ä–æ–∫—Å–∏: –ø–æ–¥–Ω—è—Ç—å —Å–µ—Ä–≤–µ—Ä —É —Å–µ–±—è –∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –Ω–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.
  - –ö–æ–º–∞–Ω–¥–∞: `./pivot proxy -l 1080`
  - –° –ø–∞—Ä–æ–ª–µ–º: `./pivot proxy -l 1080 -a user:pass` (–∏–ª–∏ `-a rand` ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—ã –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å).
- –†–µ–≤–µ—Ä—Å‚Äë–ø—Ä–æ–∫—Å–∏: —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ –≤—ã —Å–Ω–∞—Ä—É–∂–∏ –∏ –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏.
  - –ù–∞ –≤–Ω–µ—à–Ω–µ–π –º–∞—à–∏–Ω–µ (–∞—Ç–∞–∫—É—é—â–∏–π/–∞–¥–º–∏–Ω): `./pivot proxy -l 7777 -l 8888`
    - –ü–µ—Ä–≤—ã–π –ø–æ—Ä—Ç ‚Äî ¬´—É–ø—Ä–∞–≤–ª—è—é—â–∏–π¬ª (control), –≤—Ç–æ—Ä–æ–π ‚Äî —Å–∞–º –ø—Ä–æ–∫—Å–∏. –ü–æ—Ä—è–¥–æ–∫ –º–µ–Ω—è—Ç—å –Ω–µ–ª—å–∑—è.
  - –í–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ (–∂–µ—Ä—Ç–≤–∞/–∞–≥–µ–Ω—Ç): `./pivot proxy -r vps:7777`
  - –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–∫—Å–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –≤–Ω–µ—à–Ω–µ–π –º–∞—à–∏–Ω–µ –ø–æ `:8888`.
- –ü—Ä–æ–±—Ä–æ—Å –∫ —É–¥–∞–ª—ë–Ω–Ω–æ–º—É –∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É –ø—Ä–æ–∫—Å–∏: `./pivot proxy -l 1080 -r vps:1080 -a user:pass`
  - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –±–µ–∑ –ø–∞—Ä–æ–ª—è –∫ –≤–∞—à–µ–º—É –ª–æ–∫–∞–ª—å–Ω–æ–º—É 1080, –∞ pivot —Å–∞–º –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º –ø—Ä–æ–∫—Å–∏.

### –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–µ—Ä–µ—Å—ã–ª–∫–∞ Unix socket

–≠—Ç–æ —Å–ø–æ—Å–æ–± ¬´–≤—ã–Ω–µ—Å—Ç–∏¬ª –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä Docker –ø–æ –∞–¥—Ä–µ—Å—É `/var/run/docker.sock`) –Ω–∞ TCP‚Äë–ø–æ—Ä—Ç, —á—Ç–æ–±—ã –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –Ω–µ–º—É –∫–∞–∫ –∫ –æ–±—ã—á–Ω–æ–º—É HTTP‚Äë–∞–¥—Ä–µ—Å—É.

- –ü—Ä–∏–º–µ—Ä: `./pivot fwd -s /var/run/docker.sock -l 4444`, –∑–∞—Ç–µ–º `curl http://127.0.0.1:4444/version`.
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Linux –∏ macOS.

### –ß—Ç–æ —Ç–∞–∫–æ–µ TLS‚Äë—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

–≠—Ç–æ –∑–∞—â–∏—Ç–∞ –∫–∞–Ω–∞–ª–∞ ¬´—Ç—Ä—É–±–∫–∏¬ª —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º. –í–∫–ª—é—á–∞–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º `+` –ø–µ—Ä–µ–¥ –∞–¥—Ä–µ—Å–æ–º –∏–ª–∏ –ø–æ—Ä—Ç–æ–º.

- –ü—Ä–∏–º–µ—Ä: `./pivot fwd -l +7777 -l 33890` –∏ `./pivot fwd -r 127.0.0.1:3389 -r +vps:7777`.
- –°–µ—Ä–≤–µ—Ä —Å–∞–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç; –∫–ª–∏–µ–Ω—Ç –¥–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Ä–µ–∂–∏–º).

### –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞ (Reuse)

–≠—Ç–æ —Å–ø–æ—Å–æ–± –∞–∫–∫—É—Ä–∞—Ç–Ω–æ ¬´–ø–æ–¥—Å–µ–ª–∏—Ç—å—Å—è¬ª –Ω–∞ —É–∂–µ –∑–∞–Ω—è—Ç—ã–π –ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞, —á—Ç–æ–±—ã ¬´—Å–≤–æ–∏¬ª –ø–æ–¥–∫–ª—é—á–∞–ª–∏—Å—å –∫ —Å–∫—Ä—ã—Ç–æ–π —Ü–µ–ª–∏, –∞ ¬´—á—É–∂–∏–µ¬ª –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ –≤–∏–¥–µ—Ç—å –æ–±—ã—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å.

- –ò–¥–µ—è: –ø–æ—Ä—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —É–∂–µ –∑–∞–Ω—è—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∞–π—Ç –Ω–∞ `192.168.1.1:8000`). –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π:
  - –µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ —Å –≤–∞—à–µ–≥–æ ¬´–≤–Ω–µ—à–Ω–µ–≥–æ IP¬ª (`-e`), —Ç–æ —Ç—Ä–∞—Ñ–∏–∫ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç—Å—è –≤ ¬´—Å–µ–∫—Ä–µ—Ç–Ω—É—é —Ü–µ–ª—å¬ª (`-r`, –Ω–∞–ø—Ä–∏–º–µ—Ä SSH `10.0.0.1:22`);
  - –µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –Ω–µ —Å –≤–∞—à–µ–≥–æ IP, –µ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –Ω–∞ ¬´–æ–±—ã—á–Ω—É—é —Ü–µ–ª—å¬ª (`-f`, —Ç–æ—Ç –∂–µ —Å–∞–π—Ç –Ω–∞ `127.0.0.1:8000`).
- –ö–æ–º–∞–Ω–¥–∞:
  - `./pivot reuse -l 192.168.1.1:8000 -r 10.0.0.1:22 -f 127.0.0.1:8000 -e 1.2.3.4`
- –ó–∞—á–µ–º: –≤—ã, –∑–Ω–∞—è ¬´—Å–µ–∫—Ä–µ—Ç¬ª, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å –∫ –æ–±—ã—á–Ω–æ–º—É –ø–æ—Ä—Ç—É –∏ –ø–æ–ø–∞–¥–∞–µ—Ç–µ –≤ –Ω—É–∂–Ω–æ–µ —Å–∫—Ä—ã—Ç–æ–µ –º–µ—Å—Ç–æ; –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.
- –ü–∞—Ä–∞–º–µ—Ç—Ä `-t N`: –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∏—ë–º –Ω–æ–≤—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ N —Å–µ–∫—É–Ω–¥, —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ —Ä–≤—É—Ç—Å—è.

## –°—Å—ã–ª–∫–∏

[https://github.com/EddieIvan01/iox](https://github.com/EddieIvan01/iox)

[https://github.com/p1d3er/port_reuse](https://github.com/p1d3er/port_reuse)

[https://ph4ntonn.github.io/port-reuse](https://ph4ntonn.github.io/Port-reuse)

[https://saucer-man.com/operation_and_maintenance/586.html](https://saucer-man.com/operation_and_maintenance/586.html)
